(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function s(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(l){if(l.ep)return;l.ep=!0;const a=s(l);fetch(l.href,a)}})();class Ks{constructor({valuePerFrame:t,valueCoef:s,startValue:n,endValue:l,propertyName:a,propertyValueEnding:r=""}){this.elem=null,this.valuePerFrame=t,this.valueCoef=s,this.startValue=n,this.curValue=n,this.endValue=l,this.propertyName=a,this.propertyValueEnding=r,this.animationNextFrame=this.animationNextFrame.bind(this)}start(t){return this.elem=t,new Promise(this.animationNextFrame)}animationNextFrame(t){return this.valueCoef===1&&this.curValue>=this.endValue||this.valueCoef===-1&&this.curValue<=this.endValue?(this.elem.style[this.propertyName]=this.endValue+this.propertyValueEnding,this.reset(),void t()):(this.curValue+=this.valuePerFrame*this.valueCoef,this.curValue=b(this.curValue,3),void setTimeout(()=>{requestAnimationFrame(()=>{this.elem.style[this.propertyName]=this.curValue+this.propertyValueEnding,this.animationNextFrame(t)})},Qs))}reset(){this.elem=null,this.curValue=this.startValue}}const $s=e=>Math.floor(e/js),Zs=({startValue:e,endValue:t,framesCount:s})=>{const n=t-e;let l=null;return l=n>=0?1:-1,{valueCoef:l,valuePerFrame:b(Math.abs(n)/s,3)}},yt=({propertyName:e,startValue:t,endValue:s,duration:n,propertyValueEnding:l=""})=>{const a=$s(n),{valueCoef:r,valuePerFrame:o}=Zs({startValue:t,endValue:s,framesCount:a});return new Ks({propertyName:e,startValue:t,endValue:s,valuePerFrame:o,valueCoef:r,propertyValueEnding:l})},js=16.6,Qs=16,_t=()=>{St(),wt(),At(),tn(),Lt()},en=e=>{e==="settings_game"&&Et()},Et=()=>{const e=U;St(),wt(),At(),p*=U/e,T.style.transform=`translatey(${p}px)`},St=()=>{U=parseFloat(getComputedStyle(Pe).height),Tt=dn.scrollHeight},wt=()=>{Me=Tt/U,$=U/Me},At=()=>{T.style.height=$+"px",oe=U},tn=()=>{T.addEventListener("mousedown",sn),T.addEventListener("touchstart",nn),T.addEventListener("scrollMovedEventVertical",rn),Pe.addEventListener("mousedown",Vt),Pe.addEventListener("touchstart",on),window.addEventListener("resize",Et),document.addEventListener("wheel",un),document.addEventListener("keydown",cn),T.ondragstart=()=>!1},sn=e=>{Ye=e.clientY-p,document.addEventListener("mousemove",Ce),document.addEventListener("mouseup",We)},nn=({changedTouches:e})=>{const{clientY:t}=e[0];Ye=t-p,document.addEventListener("touchmove",ln),document.addEventListener("touchend",an)},ln=({changedTouches:e})=>{Ce(e[0])},Ce=({clientY:e})=>{p=e-Ye,q()},Lt=()=>{T.style.transform=`translatey(${p}px)`,T.dispatchEvent(hn)},We=()=>{document.removeEventListener("mousemove",Ce),document.removeEventListener("mouseup",We)},an=()=>{document.removeEventListener("touchmove",Ce),document.removeEventListener("touchend",We)},rn=()=>{requestAnimationFrame(()=>{Mt.scrollTop=kt})},Vt=({clientY:e})=>{p=e-$/2,q()},on=({changedTouches:e})=>{Vt(e[0])},un=e=>{e.deltaY!==0&&(p===0&&e.deltaY<0||Fe>=oe&&e.deltaY>0||(e.deltaY<0?(p+=-1*re,q()):(p+=re,q())))},cn=e=>{e.key==="ArrowDown"?(p+=re,q()):e.key==="ArrowUp"&&(p+=-1*re,q())},q=()=>{Fe=p+$,p<=ht?p=ht:Fe>=oe&&(p=oe-$),kt=p*Me,requestAnimationFrame(Lt)};let re=30,U=null,Tt=null,$=null;const hn=new Event("scrollMovedEventVertical");let Me=null,p=0,Fe=0,ht=0,oe=null,kt=null,Ye=null;const Mt=document.getElementsByClassName("settingsMenu")[0].children[1],dn=Mt,Pe=document.getElementsByClassName("scrollTrackVertical")[0],T=document.getElementsByClassName("scrollThumbVertical")[0];_t();const mn=({sudokuArr:e,sudokuArrPrepared:t,gameMetrics:s,emptyCellsCll:n,rightInputs:l,wrongInputs:a,sudokuHiddenCells:r,notesDataCll:o,fieldHistory:u,appSettings:c,appColorAngle:d,appBrightness:g,appTheme:m,appZenModeState:C})=>{pn(e,t),bn(s),fn(n),yn(l,a),En(r),wn(o),Ln(u),Tn(c),Pt(d),Nt(g),kn(m),Mn(C)},Ft=()=>{gn(),vn(),Cn(),_n(),Sn(),An(),Vn()},pn=(e,t)=>{const s=JSON.stringify(e);localStorage.setItem("gameFieldArrOrigin",s);const n=JSON.stringify(t);localStorage.setItem("gameFieldArrPrepared",n)},gn=()=>{localStorage.removeItem("gameFieldArrOrigin"),localStorage.removeItem("gameFieldArrPrepared")},bn=e=>{const t=JSON.stringify(e);localStorage.setItem("gameMetrics",t)},vn=()=>{localStorage.removeItem("gameMetrics")},fn=e=>{const t=JSON.stringify(e);localStorage.setItem("emptyCellsCll",t)},Cn=()=>{localStorage.removeItem("emptyCellsCll")},yn=(e,t)=>{const s=JSON.stringify(e);localStorage.setItem("rightInputs",s);const n=JSON.stringify(t);localStorage.setItem("wrongInputs",n)},_n=()=>{localStorage.removeItem("rightInputs"),localStorage.removeItem("wrongInputs")},En=e=>{const t=JSON.stringify(e);localStorage.setItem("sudokuHiddenCells",t)},Sn=()=>{localStorage.removeItem("sudokuHiddenCells")},wn=e=>{const t=JSON.stringify(e);localStorage.setItem("notesDataCll",t)},An=()=>{localStorage.removeItem("notesDataCll")},Ln=e=>{const t=JSON.stringify(e);localStorage.setItem("fieldHistory",t)},Vn=()=>{localStorage.removeItem("fieldHistory")},Tn=e=>{const t=JSON.stringify(e);localStorage.setItem("appSettings",t)},Pt=e=>{localStorage.setItem("appColorAngle",e)},Nt=e=>{localStorage.setItem("appBrightness",e)},kn=e=>{localStorage.setItem("appTheme",e)},Mn=e=>{localStorage.setItem("appZenMode",e)},ye={subscribers:[],subscribe(e){this.subscribers.push(e)},unsubscribe(e){this.subscribers=this.subscribers.filter(t=>t!==e)},broadcast(e){this.subscribers.forEach(t=>{t(e)})}},Fn=e=>{e.length>0&&(A=e,ye.broadcast(A.length))},xt=()=>{const{row:e,col:t}=ee(),s=$e(e,t);A.push({row:e,col:t,prevVal:s}),ye.broadcast(A.length)},dt=()=>({lastHistoryAction:A.pop(),length:A.length});let A=[];const b=(e=0,t=0)=>{const s=(e=Number(e)).toFixed(t+1);return Number(s.slice(0,s.length-1))},ne=e=>isNaN(e)!==!0;class mt extends HTMLElement{constructor(){super(),this.onAttributeChange=this.attributeChangedCallbackBeforeElemConnected,this._beforeRenderAttrs={},this._inFocus=!1,this._value=null,this._minValue=null,this._maxValue=null,this._type=null,this._step=null,this._stepFloatDigits=null,this._valueChanged=null,this._maxAvailValue=null,this._rangeTrack=null,this._rangeTrackFill=null,this._fillingTrack=null,this._rangeThumb=null,this._rangeMask=null,this._mouseX=null,this._old_baseX=null,this._rangeTrackX=null,this._startTrackWidth=100,this._startRangeThumbFullSize=20,this._trackWidth=null,this._rangeThumbHalfSize=null,this._rangeThumbFullSize=null,this._oneStepSize=null,this._stepsCll=null,this._stepPos=null,this._stepPosOld=null,this._stepPosMax=null,this._stepPosMin=null,this._deltaPos=null,this.create_html(),this.setBaseValues(),this.calcOneStepSize(),this.calcStepsCll(),this.setBinds(),this.setListeners()}setBinds(){this.onRangeThumbMouseDown=this.onRangeThumbMouseDown.bind(this),this.onRangeThumbMouseUp=this.onRangeThumbMouseUp.bind(this),this.onRangeThumbMouseMove=this.onRangeThumbMouseMove.bind(this),this.onPageLeave=this.onPageLeave.bind(this),this.checkBlur=this.checkBlur.bind(this),this.onKeyDown=this.onKeyDown.bind(this)}setListeners(){document.addEventListener("mouseleave",this.onPageLeave)}setBaseValues(){this._valueChanged=!1,this._stepPos=0,this._stepPosOld=0,this._fillingTrack=!1,this._trackWidth=this._startTrackWidth,this._rangeThumbFullSize=this._startRangeThumbFullSize,this._rangeThumbHalfSize=this._startRangeThumbFullSize/2,this._minValue=0,this._maxValue=100,this._maxAvailValue=100,this._value=50,this._step=1,this._stepFloatDigits=0,this._fillingTrack=!0,this.enableTrackFill()}fullRecalcAndRepaint(){this.getRangeTrackX(),this.calcMetrics(),this.checkCanDoStep(),this.onTarckFill(),this.setThumbPos()}getStepPos(){this._value===.9&&(console.log(this._value),console.log(this._step),console.log(this._stepsCll)),this._stepPos=this._stepsCll.findIndex(t=>t.stepValue===this._value),this._stepPos===-1&&(this._stepPos=0,this._value=this._stepsCll[this._stepPos].stepValue,this._value=this.findСlosestValue(this._value)),this._stepPosOld=this._stepPos}updateValue(t){this._value=t}update_min(t){this._minValue=t}update_max(t){this._maxValue=t}update_step(t){this._step=t,this._stepFloatDigits=this.calcValueStepFloatDigits()}update_fill(t){t===!0?(this._fillingTrack=!0,this.enableTrackFill()):(this._fillingTrack=!1,this.disableTrackFill())}set fill(t){this.processingAttrFill(t)}get fill(){return this._fillingTrack}set step(t){this.processingAttrStep(t)}get step(){return this._step}calcValueStepFloatDigits(){let t=null;const{float:s}=H(this._minValue);t=s!==0?String(s).split(".")[1].length:0;let n=null;const{float:l}=H(this._step);return n=l!==0?String(l).split(".")[1].length:0,t>n?t:n}validateFill(t){const s=typeof t;return s==="boolean"?t:s==="string"?t==="true":void 0}validateStep(t){return t=Number(t),ne(t)===!0?Math.abs(t):this._step}get value(){return this._value}set value(t){this.processingAttrValue(t)}validateValue(t){return t=Number(t),ne(t)!==!0?this._value:t<=this._minValue?this._minValue:t>=this._maxAvailValue?this._maxAvailValue:this.findСlosestValue(t)}findСlosestValue(t){const s=String(H(this._step).float).slice(2).length,n=String(H(this._minValue).float).slice(2).length,l=String(H(t).float).slice(2).length,a=10**Math.max(s,n,l),r=(t*a-this._minValue*a)%(this._step*a)/a;return r!==0&&(t=b(t-r,this._stepFloatDigits)),t}set min(t){this.processingAttrMin(t)}get min(){return this._minValue}set max(t){this.processingAttrMax(t)}get max(){return this._maxValue}calc_maxAvailValue(){this._maxAvailValue=this._stepsCll[this._stepsCll.length-1].stepValue}validateMin(t){return t=Number(t),ne(t)===!0?t>=this._maxValue?this._maxValue:t:this._minValue}validateMax(t){return t=Number(t),ne(t)===!1?this._maxValue:t<=this._minValue?this._minValue:t}set type(t){this._type=t,this.setAttribute("type",this._type)}calcSelfFullWidth(){const t=this._rangeTrack.clientWidth;return t!==this._trackWidth&&(this._trackWidth=t,!0)}calcThumbHalfSize(){const t=this._rangeThumb.clientWidth;return t!==this._rangeThumbFullSize&&(this._rangeThumbFullSize=t,this._rangeThumbHalfSize=t/2,!0)}calcOneStepSize(){const t=b((this._maxValue-this._minValue)/this._step,3);this._oneStepSize=b((this._trackWidth-this._rangeThumbFullSize)/t,3)}calcStepsCll(){const t=10**String(H(this._step).float).slice(2).length;this._stepsCll=[],this._stepPos=0,this._stepPosOld=0;let s=0,n=null,l=this._minValue;for(let a=0;l<=this._maxValue;a++)n={},n.stepPos=b(s,3),n.stepValue=b(l,this._stepFloatDigits),n.stepValue===this._value&&(this._stepPos=a,this._stepPosOld=this._stepPos),this._stepsCll.push(n),s+=this._oneStepSize,l=(l*t+this._step*t)/t;this._stepPosMin=0,this._stepPosMax=this._stepsCll.length-1,this._maxAvailValue=this._stepsCll[this._stepPosMax].stepValue}calcMetrics(){const t=this.calcSelfFullWidth(),s=this.calcThumbHalfSize();t!==!0&&s!==!0||(this.calcOneStepSize(),this.calcStepsCll())}create_html(){this._rangeTrack=document.createElement("div"),this._rangeTrackFill=document.createElement("div"),this._rangeThumb=document.createElement("div"),this._rangeMask=document.createElement("div"),this._rangeTrack.classList.add("rangeTrack"),this._rangeTrackFill.classList.add("rangeTrackFill"),this._rangeThumb.classList.add("rangeThumb"),this._rangeMask.classList.add("rangeMask"),this._rangeTrack.append(this._rangeTrackFill),this._rangeTrack.append(this._rangeThumb)}insert_toPage(){this.append(this._rangeTrack),this.append(this._rangeMask)}getRangeTrackX(){this._rangeTrackX=b(this._rangeTrack.getBoundingClientRect().left.toFixed(this._stepFloatDigits),this._stepFloatDigits)}activateMousedown(){this.classList.remove("inactive"),this.addEventListener("mousedown",this.onRangeThumbMouseDown),this.addEventListener("touchstart",this.onRangeThumbMouseDown)}diactivateMousedown(){this.classList.add("inactive"),this.removeEventListener("mousedown",this.onRangeThumbMouseDown),this.removeEventListener("touchstart",this.onRangeThumbMouseDown)}checkBlur(t){t.target!==this._rangeMask&&t.target!==this._rangeThumb&&this._inFocus===!0&&this.doBlur()}doBlur(){this._inFocus=!1,this.classList.remove("inUse"),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("touchstart",this.checkBlur),document.removeEventListener("mousedown",this.checkBlur),this.dispatchEvent(new Event("blur",{bubbles:!0}))}onRangeThumbMouseDown(t){t.preventDefault(),this.getRangeTrackX(),this._inFocus===!1&&(this._inFocus=!0,this.dispatchEvent(new Event("focus",{bubbles:!0})),this.classList.add("inUse"),this.calcMetrics()),this._old_baseX=this._stepsCll[this._stepPos].stepPos,this.onRangeThumbMouseMove(t),document.addEventListener("mouseup",this.onRangeThumbMouseUp),document.addEventListener("touchend",this.onRangeThumbMouseUp),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("touchstart",this.checkBlur),document.addEventListener("mousedown",this.checkBlur),document.addEventListener("mousemove",this.onRangeThumbMouseMove),document.addEventListener("touchmove",this.onRangeThumbMouseMove)}onKeyDown(t){if(this._inFocus===!0)switch(t.key){case"ArrowRight":this.onArrowRight();break;case"ArrowLeft":this.onArrowLeft()}}onArrowRight(){this._stepPos<this._stepPosMax&&(this._stepPos++,this.setThumbPos(),this.onTarckFill(),this._value=this._stepsCll[this._stepPos].stepValue,this.dispatchEvent(new Event("input",{bubbles:!0})),this.dispatchEvent(new Event("change",{bubbles:!0})))}onArrowLeft(){this._stepPos>this._stepPosMin&&(this._stepPos--,this.setThumbPos(),this.onTarckFill(),this._value=this._stepsCll[this._stepPos].stepValue,this.dispatchEvent(new Event("input",{bubbles:!0})),this.dispatchEvent(new Event("change",{bubbles:!0})))}enableTrackFill(){this.onTarckFill=this.do_trackFill,this._rangeTrackFill.classList.add("show")}disableTrackFill(){this.onTarckFill=()=>{},this._rangeTrackFill.classList.remove("show")}do_trackFill(){this._rangeTrackFill.style.width=this._stepsCll[this._stepPos].stepPos+this._rangeThumbFullSize+"px"}onTarckFill(){}onPageLeave(){this._inFocus===!0&&(this.onRangeThumbMouseUp({type:"pageLeave"}),this.doBlur())}onRangeThumbMouseUp(t){this._inFocus===!0&&(document.removeEventListener("mousemove",this.onRangeThumbMouseMove),document.removeEventListener("touchmove",this.onRangeThumbMouseMove),document.removeEventListener("mouseup",this.onRangeThumbMouseUp),document.removeEventListener("touchend",this.onRangeThumbMouseUp),this._valueChanged===!0&&(this._valueChanged=!1,this.dispatchEvent(new Event("change",{bubbles:!0}))))}onRangeThumbMouseMove(t){this.update_move_metrics(t)===!0&&(this.setThumbPos(),this.onTarckFill(),this._valueChanged=!0,this._value=this._stepsCll[this._stepPos].stepValue,this.dispatchEvent(new Event("input",{bubbles:!0})))}update_move_metrics(t){let s;return s=t.pageX!==void 0?t.pageX:t.changedTouches[0].pageX,this._mouseX=s-this._rangeTrackX-this._rangeThumbHalfSize,this._deltaPos=Math.round((this._mouseX-this._old_baseX)/this._oneStepSize),this._stepPos+=this._deltaPos,this._stepPosOld!==this._stepPos&&(this._stepPos>this._stepPosMax?this._stepPos=this._stepPosMax:this._stepPos<this._stepPosMin&&(this._stepPos=this._stepPosMin),this._stepPosOld!==this._stepPos&&(this._old_baseX=this._stepsCll[this._stepPos].stepPos,this._stepPosOld=this._stepPos,!0))}setThumbPos(){this._rangeThumb.style.transform=`translatex(${this._stepsCll[this._stepPos].stepPos}px)`}connectedCallback(){this.onAttributeChange=this.attributeChangedCallbackAfterElemConnected,this.processingAttrsOnElemConnected(),this.insert_toPage(),this.onTarckFill(),this.setThumbPos(),this.checkCanDoStep(),this.dispatchEvent(new Event("ready"))}static get observedAttributes(){return["min","max","value","type","step","fill"]}attributeChangedCallbackBeforeElemConnected(t,s,n){this._beforeRenderAttrs[t]=n}processingAttrsOnElemConnected(){const t=this._beforeRenderAttrs.step;this.processingAttrStep(t);const s=this._beforeRenderAttrs.value;this.processingAttrValue(s);const n=this._beforeRenderAttrs.min;this.processingAttrMin(n);const l=this._beforeRenderAttrs.max;this.processingAttrMax(l);const a=this._beforeRenderAttrs.fill;this.processingAttrFill(a)}attributeChangedCallbackAfterElemConnected(t,s,n){switch(t){case"min":this.processingAttrMin(n);break;case"max":this.processingAttrMax(n);break;case"value":this.processingAttrValue(n);break;case"step":this.processingAttrStep(n);break;case"fill":this.processingAttrFill(n)}}attributeChangedCallback(t,s,n){this.onAttributeChange(t,s,n)}onAttributeChange(){}processingAttrMin(t){const s=this.validateMin(t);let n=null;this._minValue!==s&&(this._minValue=s,this.setAttribute("min",this._minValue),this.calcOneStepSize(),this.calcStepsCll(),n=this._value<=this._minValue?this._minValue:this.findСlosestValue(this._value),n!==this._value&&(this._value=n,this.setAttribute("value",this._value)),this.getStepPos(),this.setThumbPos(),this.onTarckFill(),this.checkCanDoStep())}processingAttrMax(t){const s=this.validateMax(t);let n=null;this._maxValue!==s&&(this._maxValue=s,this.setAttribute("max",this._maxValue),this.calcOneStepSize(),this.calcStepsCll(),n=this._value>=this._maxAvailValue?this._maxAvailValue:this.findСlosestValue(this._value),n!==this._value&&(this._value=n,this.setAttribute("value",this._value)),this.getStepPos(),this.setThumbPos(),this.onTarckFill(),this.checkCanDoStep())}processingAttrValue(t){const s=this.validateValue(t);this._value!==s&&(this._value=s,this.setAttribute("value",this._value),this.getStepPos(),this.setThumbPos(),this.onTarckFill())}processingAttrStep(t){const s=this.validateStep(t);if(this._step!==s){this._step=s,this._stepFloatDigits=this.calcValueStepFloatDigits(),this.calcOneStepSize(),this.calcStepsCll(),this.setAttribute("step",this._step);let n=this._value;n=n>=this._maxAvailValue?this._maxAvailValue:this.findСlosestValue(this._value),n!==this._value&&(this._value=n,this.setAttribute("value",this._value)),this.getStepPos(),this.setThumbPos(),this.onTarckFill(),this.checkCanDoStep()}}processingAttrFill(t){(t=this.validateFill(t))!==this._fillingTrack&&(this._fillingTrack=t,t?this.enableTrackFill():this.disableTrackFill(),this.setAttribute("fill",this._fillingTrack))}checkCanDoStep(){return b(this._minValue+this._step,this._stepFloatDigits)>this._maxValue?(this.diactivateMousedown(),!0):(this.activateMousedown(),!1)}static initStyles(){const t=document.createElement("style");t.textContent=`
			number-range {
				display: inline-flex;
				height: 4vmin;
				width: 15vmin;
				justify-content: center;
				align-items: center;
				cursor:pointer;
				position:relative;
				user-select:none;
			}
			number-range:focus{
				outline : 2px line solid;
			}
			number-range:hover .rangeTrackFill,
			number-range:hover .rangeThumb,
			number-range.inUse .rangeTrackFill,
			number-range.inUse .rangeThumb{
				background-color: #12a2d2;
			}
			number-range.inactive{
				filter: brightness(0.7) grayscale(1);
			}
			number-range .rangeTrack{
				display: flex;
				align-items: center;
				height: 30%;
				width: 100%;
				background-color: #e5e5e5;
				border-radius: 3px;
				overflow: hidden;
				border-radius: 10px;
			}
			number-range .rangeTrackFill{
				display: none;
				height: 100%;
				width: 0%;
				background-color : deepskyblue;
				border-radius: 10px;
			}
			number-range .rangeTrackFill.show{
				display: block;
			}
			number-range .rangeThumb{
				border-radius: 10px;
				height: 3vmin;
				width: 3vmin;
				background-color: #00bfff;
				position : absolute;
				box-sizing: border-box;
			}
			.rangeMask{
				height:100%;
				width:100%;
				position: absolute;
				z-index:1000;
			}
		`,document.head.append(t)}}const H=(e=0)=>{e=Number(e);const t=String(e).split(".");let s=Number(t[0]),n=0;return t[1]!==void 0&&(n=+("0."+t[1])),{int:s,float:n}};mt.initStyles(),customElements.define("number-range",mt);const Pn=e=>{Z!==e&&(Nn(),Bt(e))},Bt=e=>{document.body.classList.add(Gt+e),Z=e},Nn=()=>{document.body.classList.remove(Gt+Z),Z=null},It=e=>{document.body.style.setProperty("--main_color-angle",e)},Dt=e=>{e||(e=Wn),Rt.value=e,It(e)},zt=e=>{document.body.style.setProperty("--app_brightness-value",e)},Ot=e=>{e||(e=Yn),Ht.value=e,zt(e)},xn=()=>{Dt(),Ot()},V={changeThemeBrightness:[],changeThemeAngle:[],changeTheme:[],subscribe(e,t){this[e].push(t)},unsubscribe(e,t){this[e]=this[e].filter(s=>s!==t)},broadcast(e,t){this[e].forEach(s=>{s(t)})}},Bn=e=>{const t=e.target.value;V.broadcast("changeThemeAngle",t)},In=e=>{const t=e.target.value;V.broadcast("changeThemeBrightness",t)},Dn=e=>{const t=e.target.getAttribute("theme-name");V.broadcast("changeTheme",t)},zn={setTheme:Dn,setDefault:xn},On=e=>{const t=e.target.getAttribute("action");if(t===null)return;const s=zn[t];s!==void 0&&s(e)},Rn=document.getElementsByClassName("themesMenu")[0],Hn=document.getElementsByClassName("customRangeInputThemeColorAngle")[0],Gn=document.getElementsByClassName("customRangeInputThemeBrightness")[0],Rt=document.getElementsByClassName("customRangeInputThemeColorAngle")[0],Ht=document.getElementsByClassName("customRangeInputThemeBrightness")[0],Gt="theme-";let Z=null;const Wn=0,Yn=1,Jn="dark";Rn.addEventListener("click",On),Hn.addEventListener("input",Bn),Gn.addEventListener("input",In);const qn=()=>{Je=b(ue/v,2)},Un=()=>{G=b(Je/w,2)},Xn=()=>{document.body.style.setProperty("--fieldCell-size",Je+"px"),document.body.style.setProperty("--fieldNote-size",G+"px")},Wt=e=>{document.body.style.setProperty("--field-size",e+"px"),ue=e},Yt=()=>{const e=parseInt(getComputedStyle(document.body).getPropertyValue("--menuSectionStatic-size")),t=parseInt(getComputedStyle(document.body).getPropertyValue("--digitsSectionStatic-size")),s=parseInt(getComputedStyle(document.body).getPropertyValue("--controls-size")),n=screen.availHeight-(t+e),l=screen.availWidth-s,a=Math.min(n,l);Wt(a-.15*a)};let ue=null,Je=null,G=null;const Jt=()=>{W=window.innerHeight,le=window.innerWidth,pt=Math.min(le,W)*Qn,Kn(),Ie=le-1-Be,De=W-(1+xe+Ne);const e=Math.min(Ie,De);Wt(e-pt),qn(),Un(),Xn()},qt=()=>{Ie=ue,De=ue,Jt()},Kn=()=>{Ne=W*$n,xe=W*Zn,Be=Math.min(W,le)*jn,document.body.style.setProperty("--menuSectionStatic-size",Ne+"px"),document.body.style.setProperty("--digitsSectionStatic-size",xe+"px"),document.body.style.setProperty("--controls-size",Be+"px")};let W=null,le=null,pt=null;const $n=.05,Zn=.05,jn=.1,Qn=.05;let Ne=null,xe=null,Be=null,Ie=null,De=null;window.addEventListener("resize",Jt);let ce=null,S=[];const qe=()=>S,Ue=e=>e.forEach(t=>{Ut(t.row,t.col,t.val)}),Ut=(e,t,s)=>{S.find(n=>n.row===e&&n.col===t)===void 0&&S.push({row:e,col:t,val:s})},el=()=>{const e=B(S,S.length-1);return S.splice(e,1)[0]},Xt=()=>{S=[]},Kt=()=>{ce=document.getElementsByClassName("hidden_cell")},tl=()=>{const e=ce.length;let t=null;for(let s=0;s<e;s+=1)t=ce[s],dl(t)},sl=(e,t,s)=>{if(t)n=e.row,l=e.col,S=S.filter(a=>a.row!==n||a.col!==l);else{const a=Ml(e.row,e.col);Ut(e.row,e.col,a)}var n,l},_={emptyCells:null,tries:null,notesCount:null,timeStart:null,timeEnd:null,totalTime:null,setBinds(){this.addTrie=this.addTrie.bind(this),this.addNote=this.addNote.bind(this)},init(){this.setBinds()},start(e){this.emptyCells=e,this.tries=0,this.notesCount=0,this.timeStart=Number(new Date),this.totalTime=0},set(e){this.emptyCells=e.emptyCells,this.tries=e.tries,this.notesCount=e.notesCount,this.timeStart=Number(new Date),this.totalTime=e.totalTime},addTrie(){this.tries+=1},addNote(){this.notesCount+=1},getFullTime(){this.totalTime+=this.timeEnd-this.timeStart;const e=String(Math.floor(this.totalTime/1e3/60/60)).padStart(2,0),t=String(Math.floor((this.totalTime-1e3*e*60*60)/1e3/60)).padStart(2,0);return[e,t,String(Math.floor((this.totalTime-1e3*e*60*60-1e3*t*60)/1e3)).padStart(2,0)].join(":")},getFullDataForSaving(){return this.timeEnd=Number(new Date),this.totalTime+=this.timeEnd-this.timeStart,{emptyCells:this.emptyCells,tries:this.tries,notesCount:this.notesCount,totalTime:this.totalTime}},getFullData(){return this.timeEnd=Number(new Date),{emptyCells:this.emptyCells,tries:this.tries,notesCount:this.notesCount,time:this.getFullTime()}},reset(){this.emptyCells=null,this.tries=null,this.notesCount=null,this.timeStart=null,this.timeEnd=null,this.totalTime=null}},$t=e=>{const t=[];return e.forEach(s=>{Array.isArray(s)?t.push($t(s)):t.push(s)}),t},ze=e=>e[B(0,e.length-1)],nl=e=>{const t=Math.floor(e)===e;return e>=3&&t?e:size},ll=e=>3*e,al=e=>{const t=[];for(let s=1;s<=e;s+=1)t.push(s);return t},il=(e,t,s)=>{const n=[],l=3*e;let a=null,r=null;a=0;for(let o=0,u=0;o<l;o++,u+=3){r=[],o>0&&o%e==0&&(a+=1,u=a);for(let c=0,d=u;c<t;c+=1,d+=1)d===t&&(d=0),r.push(s[d]);n.push(r)}return n},rl=e=>{let t=null,s=null,n=null,l=null,a=null,r=null;n=[];for(let o=0;o<e;o+=1){t=3*o,s=t+2,l=[],a=[],r=B(t,s),l.push(r);for(let u=t;u<=s;u+=1)u!==r&&a.push(u);r=ze(a),l.push(r),n.push(l)}return n},ol=(e,t)=>{let s=null,n=null;const l=e.length;for(let a=0;a<l;a+=1)s=e[a][0],n=e[a][1],[t[s],t[n]]=[t[n],t[s]]},ul=(e,t)=>{let s=null,n=null;const l=t.length,a=e.length;for(let r=0;r<a;r+=1){s=e[r][0],n=e[r][1];for(let o=0;o<l;o+=1)[t[o][s],t[o][n]]=[t[o][n],t[o][s]]}},cl=(e,t)=>{const s=$t(e);return[s,((n,l,a)=>{const r=[];let o=[...l[0]],u=null,c=null,d=null;for(let g=0;g<n;g+=1)u=ze(o),c=ze(l[u]),d=a[u][c],a[u][c]=0,l[u]=l[u].filter(m=>m!==c),r.push({row:u,col:c,val:d}),l[u].length===0&&(o=o.filter(m=>m!==u));return r})(t,(n=>{const l=[],a=n.length;let r=[];for(let o=0;o<a;o+=1)r.push(o);for(let o=0;o<a;o+=1)l.push([...r]);return l})(s),s)]},hl=e=>{const t=nl(e),s=ll(t),n=al(s),l=il(t,s,n),a=rl(t);return ol(a,l),ul(a,l),[l,s]},h={set:[],unset:[],value_changed:[],addNote:[],subscribe(e,t){this[e].push(t)},unsubscribe(e,t){this[e]=this[e].filter(s=>s!==t)},broadcast(e,t,s){this[e].forEach(n=>{n(t,s)})}},dl=e=>{const t=e.children[0],s=e.children[1];e.notes=[],t.textContent="",s.innerHTML="",s.classList.add("hide"),t.classList.remove("hide"),e.curLayer="valueLayer"},ml=()=>{let e=i.valueLayer.textContent;return e=Number(e),e},X=()=>{if(i===null)return null;let e=null;return e=i.canEdit?ml():Number(i.wrap.textContent),e},pl=e=>{const t=i;requestAnimationFrame(()=>{t.valueLayer.textContent=e})},k=(e,t,s)=>{if(i!==null&&i.row===e&&i.col===t)return;i!==null&&i.wrap.classList.remove("choosen"),Zt(e,t,s),i.wrap.classList.add("choosen");const n=X();h.broadcast("unset"),h.broadcast("set",i,n)},Zt=(e,t,s)=>{const n=s.classList.contains("hidden_cell");i={wrap:s,valueLayer:s.children[0],notesLayer:s.children[1],curLayer:s.curLayer,row:e,col:t,canEdit:n}},ee=()=>i===null?null:i,te=()=>{i!==null&&(i.wrap.classList.remove("choosen"),i=null,h.broadcast("unset"))},_e=e=>i.curLayer!==e&&(bl(),gl(e),!0),gl=e=>{i[e].classList.remove("hide"),i.curLayer=e,i.wrap.curLayer=e},bl=()=>{const e=i.curLayer;i[e].classList.add("hide"),i.curLayer=null,i.wrap.curLayer=null},vl=e=>{_e("notesLayer")&&je(""),i.wrap.notes=i.wrap.notes.filter(n=>n!==e);const t=String(e),s=i.notesLayer.children.length;for(let n=0;n<s;n+=1)if(i.notesLayer.children[n].textContent===t)return void i.notesLayer.children[n].remove()},fl=e=>{e.forEach(({row:t,col:s,notes:n})=>{const l=E[t][s];Zt(t,s,l),n.forEach(Cl)}),i=null},Cl=e=>{if(!i.canEdit)return;_e("notesLayer")&&xl("");const[t,s]=jt(e);Qt(t,s,e),h.broadcast("addNote",i,e)},yl=e=>{if(!i.canEdit)return;_e("notesLayer")&&je("");const[t,s]=jt(e);Qt(t,s,e),h.broadcast("addNote",i,e)},jt=e=>{const t=w>4?4:w,s=e-1,n=Math.floor(s/t);return[s-n*t,n]},Qt=(e,t,s)=>{let n=w===5?1:0;const l=document.createElement("div");l.classList.add("field_cell_note"),l.style.height=G+"px",l.style.width=G+"px",l.style.top=t*G+"px",l.style.left=e*G+n+"px",l.textContent=s,i.wrap.notes.push(s),i.notesLayer.append(l)},es=e=>{k(e.target.row,e.target.col,e.target)},_l=e=>{e.button===2?te():M.addEventListener("mouseover",es)},gt=e=>{M.removeEventListener("mouseover",es)},El=e=>{e.button===2?te():k(e.target.row,e.target.col,e.target)},M=document.getElementsByClassName("fieldWrap")[0];let i=null;M.addEventListener("mousedown",El),M.addEventListener("mousedown",_l),M.addEventListener("mouseup",gt),M.addEventListener("mouseleave",gt),window.addEventListener("contextmenu",te);const Oe=document.getElementsByClassName("digitsWrap")[0],ts=e=>{const t=document.createElement("div");t.classList.add("digits");let s=null;for(let n=1;n<=e;n++)s=document.createElement("span"),s.classList.add("digits_item","elemMask"),s.textContent=n,t.append(s);Oe.append(t)},ss=()=>{Oe.children.length>0&&Oe.children[0].remove()},Sl=e=>{if(ee()===null||!e.target.classList.contains("digits_item"))return;const t=Number(e.target.textContent);cs(t)},wl=document.getElementsByClassName("digitsWrap")[0];wl.addEventListener("click",Sl);let Xe=!1,Ke="edit",j=null,E=null,v=null,w=null,z=null,y=null,ae=null,O=null;const Al=[{name:"size",variants:[3,4,5]},{name:"complexity",variants:["easy","medium","hard"]}],Ll={easy:35,medium:45,hard:55},ns=(e,t)=>j.children[v*e+t],B=(e,t)=>Math.floor(Math.random()*(t-e+1)+e),ls=()=>{O.forEach(({row:e,col:t})=>{y[e][t]=0})},F=(e,t)=>E[e][t],as=e=>{const t=[];let s=null;for(let n=0;n<v;n+=1)s=E[n][e],t.push(s);return t},Vl=()=>{const{row:e,col:t}=i,s=X();kl(s,e,t)},Tl=e=>{const t=[];let s=null;for(let n=0;n<v;n+=1)s=y[n][e],t.push(s);return t},kl=(e,t,s)=>y[t][s]=e,$e=(e,t)=>y[e][t],Ml=(e,t)=>z[e][t],Ze=(e,t,s)=>z[t][s]===e,Fl=()=>{const e=[];let t=null;return qe().forEach(({row:s,col:n})=>{t=E[s][n].notes,t.length>0&&e.push({row:s,col:n,notes:t})}),e},Pl=()=>{const e=[],t=[];let s=null;return O.forEach(({row:n,col:l,val:a})=>{s=y[n][l],s!==0&&(a===s?t.push({row:n,col:l,val:a}):e.push({row:n,col:l,val:s}))}),{rightInputs:t,wrongInputs:e}},Nl=e=>{i!==null&&i.canEdit&&X()!==e&&Ee(e)},I={subscribers:[],subscribe(e){this.subscribers.push(e)},unsubscribe(e){this.subscribers=this.subscribers.filter(t=>t!==e)},broadcast(e,t,s){this.subscribers.forEach(n=>{n(e,t,s)})},validateCellValue(e,t){const s=Ze(t,e.row,e.col);I.broadcast(e,s,t)}},xl=e=>{xt(),pl(e)},je=e=>{var t;xt(),t=e,i.canEdit&&requestAnimationFrame(()=>{i.valueLayer.textContent=t,h.broadcast("value_changed",i,t)})},Ee=e=>{_e("valueLayer"),je(e)},is=(e,t,s)=>{const n=E[e][t];return n.children[0].textContent=s,y[e][t]=s,n},Bl=(e,t,s)=>{const n=is(e,t,s);ot(n)},Il=(e,t)=>{if(!t||qe().length!==0)return;Wl(),Ft(),la(),Ol(),fa(),ta();const s=_.getFullData();_.reset(),Sa(s),te(),panelOpener("won_game")},rs=()=>{gs(),Rl(),lt()},os=()=>{te(),_.reset(),A=[],ye.broadcast(A.length),ls()},Dl=(e,t)=>{wa(Al),Gl(e,t),Qe(),st(),Yl()},zl=({size:e,complexity:t})=>{rs(),os(),Qe(),st(),us(e,t)},Ol=()=>{Xe=!0,M.classList.add("blockClicks"),ba()},Rl=()=>{Xe=!1,M.classList.remove("blockClicks"),va()},Hl=()=>{const{gameFieldArrOrigin:e,gameFieldArrPrepared:t,gameMetrics:s,emptyCellsCll:n,rightInputs:l,wrongInputs:a,sudokuHiddenCells:r,notesDataCll:o,fieldHistory:u}={gameFieldArrOrigin:JSON.parse(localStorage.getItem("gameFieldArrOrigin")),gameFieldArrPrepared:JSON.parse(localStorage.getItem("gameFieldArrPrepared")),gameMetrics:JSON.parse(localStorage.getItem("gameMetrics")),emptyCellsCll:JSON.parse(localStorage.getItem("emptyCellsCll")),rightInputs:JSON.parse(localStorage.getItem("rightInputs")),wrongInputs:JSON.parse(localStorage.getItem("wrongInputs")),sudokuHiddenCells:JSON.parse(localStorage.getItem("sudokuHiddenCells")),notesDataCll:JSON.parse(localStorage.getItem("notesDataCll")),fieldHistory:JSON.parse(localStorage.getItem("fieldHistory"))};O=r,z=e,y=t,ls(),v=z.length,w=v/3,Yt(),qt(),[j,E]=Is(w,y),ss(),ts(v),Kt(),Ue(n),j.addEventListener("animationend",ps),Ns(v,w),fl(o),l.forEach(({row:c,col:d,val:g})=>{is(c,d,g)}),a.forEach(({row:c,col:d,val:g})=>{Bl(c,d,g)}),Fn(u),_.set(s),tt(),it()},us=(e,t)=>{w=e,ri(),Xt(),[z,v]=hl(w),ss(),ts(v),ae=Jl(v**2,t),[y,O]=cl(z,ae),Ue(O),Yt(),qt(),[j,E]=Is(e,y),Kt(),j.addEventListener("animationend",ps),Ns(v,e),_.start(ae),tt(),it()},Gl=(e=3,t="easy")=>{localStorage.getItem("gameMetrics")?Hl():us(e,t)},Qe=()=>{he===null&&(Xl(),window.addEventListener("beforeunload",se))},Wl=()=>{Kl(),window.removeEventListener("beforeunload",se)},Yl=()=>{let{appSettings:e,appColorAngle:t,appBrightness:s,appTheme:n,appZenMode:l}={appSettings:JSON.parse(localStorage.getItem("appSettings")),appColorAngle:localStorage.getItem("appColorAngle"),appBrightness:localStorage.getItem("appBrightness"),appTheme:localStorage.getItem("appTheme"),appZenMode:localStorage.getItem("appZenMode")};var a;Na(e),Dt(Number(t)),Ot(Number(s)),(a=n)&&a!=="null"||(a=Jn),Bt(a),_i(l)},Jl=(e,t)=>{const s=Ll[t]/100;return Math.floor(e*s)},ql=e=>{i!==null&&i.canEdit&&(i.wrap.notes.includes(e)?vl(e):yl(e))},cs=e=>{if(!Xe&&e!==0)switch(Ke){case"edit":Nl(e);break;case"note":ql(e);break;default:console.warn("wtf")}},se=()=>{const{rightInputs:e,wrongInputs:t}=Pl(),s=Fl(),n=Ta(),l=Rt.value,a=Ht.value,r=Z,o=_.getFullDataForSaving(),u=qe(),c=yi();mn({sudokuArr:z,sudokuArrPrepared:y,gameMetrics:o,emptyCellsCll:u,rightInputs:e,wrongInputs:t,sudokuHiddenCells:O,notesDataCll:s,fieldHistory:A,appSettings:n,appColorAngle:l,appBrightness:a,appTheme:r,appZenModeState:c})},hs=()=>{et.classList.add("showSavingIdicator")},Ul=()=>{et.classList.remove("showSavingIdicator")},et=document.getElementsByClassName("menu_btn saveBg")[0];let he=null;et.addEventListener("animationend",Ul);const Xl=()=>{he=setInterval(se,5e3)},Kl=()=>{clearInterval(he),he=null},ds={subscribers:[],subscribe(e){this.subscribers.push(e)},unsubscribe(e){this.subscribers=this.subscribers.filter(t=>t!==e)},broadcast(e){this.subscribers.forEach(t=>{t(e)})}},$l=(e,t,s)=>{if(!t)return;const{row:n,col:l}=e,{cells:a,vals:r}=jl(n,l),o=r.length;let u=null,c=null,d=null;for(let g=0;g<o;g+=1)if({row:c,col:d}=a[g],u=Ze(r[g],c,d),!u)return;ds.broadcast(a)},Zl=(e,t)=>{t!==""&&_.addTrie()},jl=(e,t)=>{const s=3*Math.floor(e/3),n=3*Math.floor(t/3),l=s+3,a=n+3,r=[],o=[];for(let u=s;u<l;u+=1)for(let c=n;c<a;c+=1)o.push(y[u][c]),r.push(E[u][c]);return{cells:r,vals:o}},Ql=e=>{ms(e,.05,.3)},ms=(e,t,s)=>{let n=null,l=0;e.forEach(a=>{n=document.createElement("div"),n.classList.add("blink"),n.style.animationDelay=l+"s",n.style.animationDuration=s+"s",l+=t,a.append(n)})},ps=e=>{e.target.classList.contains("blink")&&e.target.remove()};let ie=null;const ea=()=>{const e=B(0,v-1),t=as(e);ms(t,.15,.7)},ta=()=>{ie=setInterval(ea,500)},tt=()=>{ie!==null&&(clearInterval(ie),ie=null)},sa=e=>{e.preventDefault()},na=()=>{se(),hs()},la=()=>{nt.classList.add("disabled")},st=()=>{nt.classList.remove("disabled")},nt=document.getElementsByClassName("menu_btn saveBg")[0];nt.addEventListener("click",na);const aa=()=>{at.classList.toggle("active")?ia():gs()},ia=()=>{Ke="note",at.classList.add("active")},gs=()=>{Ke="edit",at.classList.remove("active")},ra=()=>{i!==null&&i.canEdit&&(i.curLayer==="valueLayer"?oa():ua())},oa=()=>{X()!==0&&Ee("")},ua=()=>{console.log("choosenCellRemoveAllNotes"),i.wrap.notes=[],i.notesLayer.innerHTML=""};let Se=!1;const ca=e=>{e>0?ha():lt()},ha=()=>{vs.classList.remove("disabled"),Se=!0},lt=()=>{vs.classList.add("disabled"),Se=!1},bs=()=>{if(!Se)return;const{lastHistoryAction:e}=dt(),t=e.prevVal===0?"":e.prevVal,s=ns(e.row,e.col);k(e.row,e.col,s),Ee(t);const{length:n}=dt();n===0&&lt()},da=()=>{const e=el(),t=ns(e.row,e.col);k(e.row,e.col,t),Ee(e.val)},ma=()=>{var e;Ft(),rs(),os(),Ss(),e=O,tl(),Xt(),Ue(e),_.start(ae),Qe(),st(),tt(),it()},pa={erase:ra,restart:ma,hint:da,undo:bs,note:aa},ga=e=>{const t=e.target.getAttribute("action");t&&(0,pa[t])(e)},ba=()=>{const e=R.children.length-1;for(let t=0;t<e;t+=1)R.children[t].classList.add("disabled")},va=()=>{const e=R.children.length;for(let t=0;t<e;t+=1)R.children[t].classList.remove("disabled")},R=document.getElementsByClassName("controls")[0],vs=R.children[0],at=R.children[1];R.addEventListener("click",ga);const fs=document.getElementsByClassName("victoryStatsBtn")[0],it=()=>{fs.classList.add("close")},fa=()=>{fs.classList.remove("close")},Ca=document.getElementsByClassName("timeResult")[0],ya=document.getElementsByClassName("tryiesResult")[0],_a=document.getElementsByClassName("emptyCellsCount")[0],Ea=document.getElementsByClassName("notesCount")[0],Sa=e=>{Ca.textContent=e.time,ya.textContent=e.tries,_a.textContent=e.emptyCells,Ea.textContent=e.notesCount},Re={subscribers:[],subscribe(e){this.subscribers.push(e)},unsubscribe(e){this.subscribers=this.subscribers.filter(t=>t!==e)},broadcast(e){this.subscribers.forEach(t=>{t(e)})}},P={complexity:{variants:null,curVariantIndex:null,curVariant:null,elem:document.getElementsByClassName("newGameMenu_complexity")[0]},size:{variants:null,curVariantIndex:null,curVariant:null,elem:document.getElementsByClassName("newGameMenu_size")[0]}},wa=e=>{e.forEach(t=>{P[t.name].variants=t.variants,P[t.name].curVariant=t.variants[0],P[t.name].curVariantIndex=0,P[t.name].elem.textContent=t.variants[0]})},Aa=e=>{e.curVariantIndex!==0&&(e.curVariantIndex-=1,e.curVariant=e.variants[e.curVariantIndex],e.elem.textContent=e.curVariant)},La=e=>{const t=e.target.getAttribute("action"),s=e.target.getAttribute("data_name");var n;if(t)switch(t){case"increase":(n=P[s]).curVariantIndex!==n.variants.length-1&&(n.curVariantIndex+=1,n.curVariant=n.variants[n.curVariantIndex],n.elem.textContent=n.curVariant);break;case"decrease":Aa(P[s]);break;case"start":Re.broadcast({size:P.size.curVariant,complexity:P.complexity.curVariant});break;default:console.warn("wtf")}},Va=e=>{e.target.parentElement.classList.contains("newGameMenu_panelLine_body_settingWrap")&&(e.deltaY>0?e.target.parentElement.firstElementChild.click():e.deltaY<0&&e.target.parentElement.lastElementChild.click())},bt=document.getElementsByClassName("newGameMenu")[0];bt.addEventListener("click",La),bt.addEventListener("wheel",Va);const rt={},Cs={},Ta=()=>rt,ka=(e=null)=>{if(e===null)return;const t=Object.entries(e);if(t.length===0)return;let s=null,n=null;t.forEach(l=>{[s,n]=l,rt[s]=n,n||Cs[s].click()})},N={subscribers:[],subscribe(e){this.subscribers.push(e)},unsubscribe(e){this.subscribers=this.subscribers.filter(t=>t!==e)},broadcast(e,t){this.subscribers.forEach(s=>{s(e,t)})}},Ma=document.getElementsByClassName("settingsMenu")[0],Fa=()=>{const e=[...document.getElementsByClassName("settingsMenu_checkbox")];let t=null;e.forEach(s=>{t=s.getAttribute("action"),Cs[t]=s})},Pa=e=>{const t=e.target.getAttribute("action"),s=e.target.checked;var n;n=s,rt[t]=n,N.broadcast(t,s)},Na=e=>{Fa(),ka(e)};Ma.addEventListener("input",Pa);const ys={newGame:document.getElementsByClassName("newGameMenu")[0],wonGame:document.getElementsByClassName("wonGameMenu")[0],settingsGame:document.getElementsByClassName("settingsMenu")[0],themesGame:document.getElementsByClassName("themesMenu")[0]},_s={subscribers:[],subscribe(e){this.subscribers.push(e)},unsubscribe(e){this.subscribers=this.subscribers.filter(t=>t!==e)},broadcast(e){this.subscribers.forEach(t=>{t(e)})}},D=async(e=L)=>{Le||(typeof e=="object"&&(e=L),Le=!0,L!==null&&Da(),L===e?(await Ha.start(Q),Ia(),Ve=!0,L=null):(Ve&&(Ve=!1,Ba(),await Ra.start(Q)),L=e,xa(e),_s.broadcast(e)),Le=!1)},xa=e=>{ys[e].classList.remove("close")},Ba=()=>{Q.classList.remove("close")},Ia=()=>{Q.classList.add("close")},Da=()=>{L&&ys[L].classList.add("close")},za=e=>{e.target===Q&&D()},Oa=e=>{const t=e.target.getAttribute("type"),s=e.target.getAttribute("action");t&&s&&t==="panel"&&D(s)},Q=document.getElementsByClassName("modalsLayer")[0],Ra=yt({propertyName:"opacity",startValue:0,endValue:1,duration:200,propertyValueEnding:""}),Ha=yt({propertyName:"opacity",startValue:1,endValue:0,duration:200,propertyValueEnding:""});let Le=!1,Ve=!0,L=null;window.addEventListener("click",za),window.addEventListener("click",Oa);const Ga=(e,t)=>{const s=()=>{t.preventDefault()},n={AltLeft:s,AltRight:s,Escape:()=>{D()},NumpadAdd:()=>{D("newGame")},KeyZ:a=>{a.ctrlKey&&Se&&bs()},KeyS:a=>{a.code==="KeyS"&&a.ctrlKey&&(a.preventDefault(),se(),hs())},KeyQ:a=>{D("settingsGame")},KeyT:a=>{D("themesGame")},Tab:a=>{a.preventDefault(),Ws()}},l=n[e];return!!l&&(l(t),!0)},Wa=e=>{i!==null&&(0,{left:()=>{const t=i.col-1;let s=null;t>=0&&(s=F(i.row,t),k(i.row,t,s))},right:()=>{const t=i.col+1;let s=null;t<v&&(s=F(i.row,t),k(i.row,t,s))},up:()=>{const t=i.row-1;let s=null;t>=0&&(s=F(t,i.col),k(t,i.col,s))},down:()=>{const t=i.row+1;let s=null;t<v&&(s=F(t,i.col),k(t,i.col,s))}}[e])()},Ya=e=>{const t=e.match(/Arrow(?<direction>\w+)/);return t!==null&&(Wa(t.groups.direction.toLowerCase()),!0)},Ja=e=>{const t=e.match(/(Numpad|Digit)(?<digit>\d)/);return t!==null&&(cs(Number(t.groups.digit)),!0)},qa=e=>{const t=[Ja,Ya,Ga],s=t.length;let n=null,l=null;for(let a=0;a<s;a+=1)if(n=t[a],l=n(e.code,e),l)return};window.addEventListener("keydown",qa);const He=e=>{const{row:t,col:s}=e,n=as(s),l=E[t];l.forEach(a=>{a.classList.add("crossCell")}),n.forEach(a=>{a.classList.add("crossCell")}),K=[...l,...n]},Ge=()=>{K!==null&&(K.forEach(e=>{e.classList.remove("crossCell")}),K=null)},Es=(e,t)=>{me(),de(e,t)},de=(e,t)=>{if(t===0)return;Y=[];let s=null;E.forEach((n,l)=>{n.forEach((a,r)=>{l===e.row&&r===e.col||(s=Number(a.textContent),s===t&&(a.classList.add("equalCell"),Y.push(a)))})})},me=()=>{Y!==null&&(Y.forEach(e=>{e.classList.remove("equalCell")}),Y=null)},ot=e=>{e.classList.add("wrongValue"),J.push(e)},Ua=e=>{e.classList.remove("wrongValue"),J=J.filter(t=>t!==e)},Ss=()=>{J.length!==0&&(J.forEach(e=>{e.classList.remove("wrongValue")}),J=[])},ws=(e,t,s)=>{s===""||t?Ua(e.wrap):ot(e.wrap)},As=(e,t)=>{ge(),pe(e,t)},pe=(e,t)=>{if(t===0)return;const{row:s,col:n}=e,l=Tl(n),a=y[s];x=[];let r=null;a.forEach((m,C)=>{C!==n&&m!==0&&m===t&&(r=F(s,C),r.classList.add("conflictCell"),x.push(r))}),l.forEach((m,C)=>{C!==s&&m!==0&&m===t&&(r=F(C,n),r.classList.add("conflictCell"),x.push(r))});const o=3*Math.floor(s/3),u=3*Math.floor(n/3),c=o+3,d=u+3;let g=null;for(let m=o;m<c;m+=1)for(let C=u;C<d;C+=1)m===s&&C===n||(g=$e(m,C),g===t&&(r=F(m,C),r.classList.add("conflictCell"),x.push(r)))},ge=()=>{x!==null&&(x.forEach(e=>{e.classList.remove("conflictCell")}),x=null)},Ls=()=>{h.subscribe("set",He),h.subscribe("unset",Ge)},Vs=()=>{h.subscribe("set",de),h.subscribe("unset",me),h.subscribe("value_changed",Es)},Ts=()=>{I.subscribe(ws)},ks=()=>{h.subscribe("set",pe),h.subscribe("unset",ge),h.subscribe("value_changed",As)},Xa=(e,t)=>{if(e==="cross")if(t){Ls();const s=ee();if(s===null)return;He(s)}else K!==null&&Ge(),h.unsubscribe("set",He),h.unsubscribe("unset",Ge)},Ka=(e,t)=>{if(e==="equal")if(t){Vs();const s=ee();if(s===null)return;const n=X();de(s,n)}else Y!==null&&me(),h.unsubscribe("set",de),h.unsubscribe("unset",me),h.unsubscribe("value_changed",Es)},$a=(e,t)=>{if(e==="conflict")if(t){ks();const s=ee();if(s===null)return;const n=X();pe(s,n)}else x!==null&&ge(),h.unsubscribe("set",pe),h.unsubscribe("unset",ge),h.unsubscribe("value_changed",As)},Za=(e,t)=>{if(e==="wrongInput")if(t){Ts();const s=Array.from(ce);let n=null,l=null,a=null;s.forEach(({row:r,col:o})=>{n=$e(r,o),n!==0&&(a=Ze(n,r,o),a||(l=F(r,o),ot(l)))})}else Ss(),I.unsubscribe(ws)},ja=()=>{Ls(),Vs(),ks(),Ts()},Qa=()=>{N.subscribe(Xa),N.subscribe(Ka),N.subscribe($a),N.subscribe(Za)};let K=null,Y=null,x=null,J=[];const Ms=()=>{var e;return e="line",document.createElementNS("http://www.w3.org/2000/svg",e)},Fs=e=>{const t=Ms();return t.setAttribute("x1",e+"%"),t.setAttribute("x2",e+"%"),t.setAttribute("y1","0%"),t.setAttribute("y2","100%"),t},Ps=e=>{const t=Ms();return t.setAttribute("x1","0%"),t.setAttribute("x2","100%"),t.setAttribute("y1",e+"%"),t.setAttribute("y2",e+"%"),t},ei=e=>{const t=b(100/e,3),s=100-t;let n=null;for(let l=t;l<=s;l+=t)l=b(l,3),n=Ps(l),n.classList.add("svgAreaBorder"),be.append(n),f.areas.cll.push(n),n=Fs(l),n.classList.add("svgAreaBorder"),be.append(n),f.areas.cll.push(n)},ti=e=>{const t=b(100/e,3),s=100-t;let n=null;for(let l=t;l<=s;l+=t)l=b(l,3),n=Ps(l),n.classList.add("svgCellBorder"),be.append(n),f.cells.cll.push(n),n=Fs(l),n.classList.add("svgCellBorder"),be.append(n),f.cells.cll.push(n)},si=(e,t)=>{ti(e),ei(t),f.curSudokuLength=e},Ns=(e,t)=>{e!==f.curSudokuLength&&(ni(),si(e,t))},ni=()=>{f.cells.cll.forEach(e=>{e.remove()}),f.cells.cll=[],f.areas.cll.forEach(e=>{e.remove()}),f.areas.cll=[]},li=(e,t)=>{e==="cellsBorders"&&(t?f.cells.cll.forEach(s=>{s.classList.remove("hide")}):f.cells.cll.forEach(s=>{s.classList.add("hide")}))},ai=(e,t)=>{e==="areasBorders"&&(t?f.areas.cll.forEach(s=>{s.classList.remove("hide")}):f.areas.cll.forEach(s=>{s.classList.add("hide")}))},ii=()=>{N.subscribe(li),N.subscribe(ai)},be=document.getElementsByClassName("fieldSvgMarks")[0],f={curSudokuLength:null,cells:{cll:[],className:"svgCellBorder"},areas:{cll:[],className:"svgAreaBorder"}},xs=document.getElementsByClassName("fieldWrap")[0];let Bs=!1;const Is=(e,t)=>{const s=ve("field",`fieldSize${e}`),n=oi(s,t);return xs.append(s),Bs=!0,[s,n]},ri=()=>{Bs&&xs.getElementsByClassName("field")[0].remove()},oi=(e,t)=>{const s=[];let n=null,l=null;return t.forEach((a,r)=>{l=[],a.forEach((o,u)=>{n=ui(r,u,o),l.push(n),e.append(n)}),s.push(l)}),s},ui=(e,t,s)=>{const n=ve("field_cell");return s!==0?n.textContent=s:ci(n),n.row=e,n.col=t,n},ci=e=>{const t=ve("field_cell_valueLayer"),s=ve("field_cell_notesLayer");s.classList.add("hide"),e.append(t,s),e.classList.add("hidden_cell"),e.notes=[],e.curLayer="valueLayer"},ve=(...e)=>{const t=document.createElement("div");return t.classList.add(...e),t},Ds=e=>{bi.style.transform=`translate(${e.x+pi}px, ${e.y+gi}px) skew(7deg, 30deg)`},hi=(e,t)=>{e==="customCursor"&&(t?di():mi())},di=()=>{document.body.classList.add("enableCustomCursor"),document.addEventListener("mousemove",Ds)},mi=()=>{document.body.classList.remove("enableCustomCursor"),document.removeEventListener("mousemove",Ds)},pi=2,gi=4,bi=document.getElementsByClassName("custom_cursor")[0];class vi{constructor({startAnimationValue:t,endAnimationValue:s}){this.startAnimationValue=t,this.endAnimationValue=s}getStartValue(){return this.startAnimationValue}getEndAnimationValue(){return this.endAnimationValue}}class zs{constructor({pathElem:t,startAnimationValue:s,endAnimationValue:n,animationDuration:l}){this.pathElem=t,this.startAnimationValue=null,this.EndAnimationValue=null,this.fullAnimationValue=null,this.animationDuration=l,this.pathAnimationData=new vi({startAnimationValue:s,endAnimationValue:n}),this.animationEndHandler=this.animationEndHandler.bind(this)}setForwardAnimationStartValue(){this.startAnimationValue=this.pathAnimationData.getStartValue()}setForwardAnimationEndValue(){this.EndAnimationValue=this.pathAnimationData.getEndAnimationValue()}setBackwardAnimationStartValue(){this.startAnimationValue=this.pathAnimationData.getEndAnimationValue()}setBackwardAnimationEndValue(){this.EndAnimationValue=this.pathAnimationData.getStartValue()}setAnimationFullValue(){this.fullAnimationValue=`${this.startAnimationValue}; ${this.EndAnimationValue};`}setForwardAnimationData(){this.setForwardAnimationStartValue(),this.setForwardAnimationEndValue(),this.setAnimationFullValue()}setBackwardAnimationData(){this.setBackwardAnimationStartValue(),this.setBackwardAnimationEndValue(),this.setAnimationFullValue()}animateForward(t=this.animationDuration){t===0?(this.setForwardAnimationEndValue(),this.forseAnimationEnd()):(this.setForwardAnimationData(),this.animate(t))}animateBackward(t=this.animationDuration){t===0?(this.setBackwardAnimationEndValue(),this.forseAnimationEnd()):(this.setBackwardAnimationData(),this.animate(t))}prepareAnimationElem(t){const s=Ci.cloneNode();return s.setAttribute("dur",`${t}ms`),s.setAttribute("values",this.fullAnimationValue),s.addEventListener("endEvent",this.animationEndHandler),s.setAttribute("begin",`${Math.floor(performance.now())}ms`),s}forseAnimationEnd(){this.pathElem.setAttribute("d",this.EndAnimationValue)}animate(t){const s=this.prepareAnimationElem(t);this.pathElem.append(s)}animationEndHandler(t){t.target.parentElement.setAttribute("d",this.EndAnimationValue),t.target.remove()}}const fi=()=>{const e=(t="animate",document.createElementNS("http://www.w3.org/2000/svg",t));var t;return e.setAttribute("attributeName","d"),e.setAttribute("fill","freeze"),e.setAttribute("repeatcount","1"),e},Ci=fi(),Te={elem:document.getElementsByClassName("leafLeft")[0],openStateValue:`M0,95
		c0,200 120,300 230,290
		c-60,-50 -70,-150 -60,-210
		c-50,-50 -100,-70 -170,-80`,closeStateValue:`M205,65
		c-120,200 -20,300 35,308
		c0,-50 -10,-150 -30,-210
		c15,-20 15,-30 -5,-98`},ke={elem:document.getElementsByClassName("leafRight")[0],openStateValue:`M560,95
		c0,200 -120,300 -230,290
		c60,-50 70,-150 60,-210
		c50,-50 100,-70 170,-80`,closeStateValue:`M355,65
		c120,200 20,300 -35,308
		c0,-50 10,-150 30,-210
		c-15,-20 -15,-30 5,-98`},fe={zenModeOn:[],zenModeOff:[],subscribe(e,t){this[e].push(t)},unsubscribe(e,t){this[e]=this[e].filter(s=>s!==t)},broadcast(e){this[e].forEach(t=>{t()})}},Os=new zs({pathElem:Te.elem,startAnimationValue:Te.openStateValue,endAnimationValue:Te.closeStateValue,animationDuration:300}),Rs=new zs({pathElem:ke.elem,startAnimationValue:ke.openStateValue,endAnimationValue:ke.closeStateValue,animationDuration:300}),Hs=()=>{var e;ut.classList.add("active"),Os.animateBackward(e),Rs.animateBackward(e),Ys.classList.remove("showControls"),we=!0,fe.broadcast("zenModeOn")},Gs=()=>{var e;ut.classList.remove("active"),Os.animateForward(e),Rs.animateForward(e),Ys.classList.add("showControls"),we=!1,fe.broadcast("zenModeOff")},Ws=()=>{we?Gs():Hs()},yi=()=>we,_i=e=>{e==="true"?Hs():Gs()},Ys=document.getElementsByClassName("field_and_controls")[0],ut=document.getElementsByClassName("zenFlowerWrap")[0];document.getElementsByClassName("zenFlowerGroup")[0];let we=!1;ut.addEventListener("click",Ws);const Ei=()=>{const e=document.createElement("span");return e.classList.add("zenFlowerEffectCircle","opcityAnimation"),e},Si=e=>{const t=B(Ii,Di)/10;e.style.height=t+"vmin",e.style.width=t+"vmin"};function*Js(){let e=0;for(;;)yield e,e+=1,e===3&&(e=0)}const wi=e=>{const t=Oi.next().value,{from:s,to:n}=Ri[t],l=B(s,n)/10;e.style.bottom=zi+"vmin",e.style.left=l+"vmin"},Ai=e=>{Xs.append(e)},Li=()=>{const e=Ei();return Si(e),wi(e),Ai(e),e},Vi=()=>{const e=Hi.next().value,{from:t,to:s}=Gi[e];return{endPosY:-1*B(t,s)}},Ti=(e,t)=>({movePerFrameY:e/(60*t)}),qs=({movePerFrameY:e,endPosY:t,startPosY:s=0,circleElem:n})=>{const l=s+e;l<t||(ki({nextPosY:l,circleElem:n}),n.nextFrameId=setTimeout(()=>{requestAnimationFrame(()=>{qs({movePerFrameY:e,endPosY:t,startPosY:l,circleElem:n})})},Bi))},ki=({nextPosY:e,circleElem:t})=>{t.style.transform=`translateY(${e}vmin)`},Mi=({circleElem:e,duration:t})=>{const{endPosY:s}=Vi(),{movePerFrameY:n}=Ti(s,t);e.style.animationDuration=t+"s",qs({movePerFrameY:n,endPosY:s,circleElem:e})},Us=(e=1)=>{if(Ae)return;const t=(vt+ft)/2*100;let s=null,n=null;for(let l=0;l<e;l+=1)setTimeout(()=>{s=Li(),n=B(vt,ft),ct.push(s),Mi({circleElem:s,duration:n})},t*l)},Fi=e=>{clearTimeout(e.target.nextFrameId),e.target.remove(),ct.filter(t=>t!==e.target),Ae||Us()},Pi=()=>{ct.forEach(e=>{Ae=!0,e.classList.add("hide")})},Ni=e=>{Ae=!1,Us(xi)},Xs=document.getElementsByClassName("zenFlowerEffectsWrap")[0],ct=[],xi=5,Bi=16;let Ae=!1;const Ii=4,Di=6,vt=4,ft=10,zi=2,Oi=Js(),Ri=[{from:2,to:15},{from:16,to:30},{from:31,to:43}],Hi=Js(),Gi=[{from:5,to:6},{from:7,to:8},{from:9,to:10}];Xs.addEventListener("transitionend",Fi),fe.subscribe("zenModeOn",Ni),fe.subscribe("zenModeOff",Pi);const Ct=document.getElementsByClassName("loadingScreen")[0];window.onload=()=>{Ct.style.transition="1s",Ct.classList.add("hide")},window.addEventListener("load",()=>{document.getElementsByClassName("modalsLayer")[0].classList.remove("close"),document.getElementsByClassName("settingsMenu modalWindow")[0].classList.remove("close"),_t(),document.getElementsByClassName("modalsLayer")[0].classList.add("close"),document.getElementsByClassName("settingsMenu modalWindow")[0].classList.add("close")},{once:!0}),_.init(),ja(),Qa(),ii(),window.addEventListener("contextmenu",sa),Re.subscribe(D),Re.subscribe(zl),I.subscribe(sl),I.subscribe($l),I.subscribe(Il),ds.subscribe(Ql),h.subscribe("value_changed",Vl),h.subscribe("value_changed",Zl),h.subscribe("value_changed",I.validateCellValue),h.subscribe("addNote",_.addNote),V.subscribe("changeTheme",Pn),V.subscribe("changeThemeAngle",It),V.subscribe("changeThemeAngle",Pt),V.subscribe("changeThemeBrightness",zt),V.subscribe("changeThemeBrightness",Nt),N.subscribe(hi),ye.subscribe(ca),_s.subscribe(en),Dl(3,"easy");import.meta.dev&&console.log("dev x123");
